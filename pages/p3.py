# a page to show current date on streamlit app
import streamlit as st
import datetime
import pandas as pd


def get_date():
    return datetime.datetime.now()


# create a heading in streamlit
st.title("Current Date")
# create a text in streamlit
current_date = get_date()
st.write("The current date and time is:", current_date)

# create a function to get current date and time


if st.button("Refresh"):
    current_date = get_date()
    # st.write(current_date)

option_chain = pd.DataFrame([
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 14650,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 96300,
        "put_oi_change": -16400,
        "put_vol": 88550,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 14700,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 43400,
        "put_oi_change": -1450,
        "put_vol": 14600,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 14750,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 19300,
        "put_oi_change": -50,
        "put_vol": 6600,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 14800,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 16650,
        "put_oi_change": 1850,
        "put_vol": 29800,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 14850,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 23050,
        "put_oi_change": 550,
        "put_vol": 1950,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 14900,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 19550,
        "put_oi_change": 1200,
        "put_vol": 20600,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 14950,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 6900,
        "put_oi_change": -800,
        "put_vol": 9750,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15000,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 488050,
        "put_oi_change": -87200,
        "put_vol": 807200,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15050,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 4950,
        "put_oi_change": -2350,
        "put_vol": 16400,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15100,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 6550,
        "put_oi_change": -6700,
        "put_vol": 22500,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15150,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 3850,
        "put_oi_change": -300,
        "put_vol": 7650,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15200,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 8200,
        "put_oi_change": -3200,
        "put_vol": 20600,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15250,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 1150,
        "put_oi_change": -4250,
        "put_vol": 5350,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15300,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 11750,
        "put_oi_change": -1650,
        "put_vol": 17950,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15350,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 3950,
        "put_oi_change": -3000,
        "put_vol": 4450,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15400,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 9300,
        "put_oi_change": 900,
        "put_vol": 18200,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15450,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 4300,
        "put_oi_change": -350,
        "put_vol": 2250,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15500,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 90150,
        "put_oi_change": -69500,
        "put_vol": 231300,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15550,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 7350,
        "put_oi_change": 50,
        "put_vol": 150,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15600,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 8600,
        "put_oi_change": -1900,
        "put_vol": 7500,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15650,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 3200,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15700,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 4650,
        "put_oi_change": -4100,
        "put_vol": 13100,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15750,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 2800,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15800,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 10000,
        "put_oi_change": -1100,
        "put_vol": 3350,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15850,
        "expiry": "Dec 15 2022",
        "call_oi": 50,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 1950,
        "put_oi_change": 0,
        "put_vol": 100,
        "pcr_oi": 39,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15900,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 3650,
        "put_oi_change": 0,
        "put_vol": 50,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 15950,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 4950,
        "put_oi_change": 450,
        "put_vol": 5700,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16000,
        "expiry": "Dec 15 2022",
        "call_oi": 600,
        "call_oi_change": 0,
        "call_vol": 200,
        "put_oi": 503600,
        "put_oi_change": -45150,
        "put_vol": 692550,
        "pcr_oi": 839.3333,
        "pcr_vol": 3462.75
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16050,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 4000,
        "put_oi_change": -50,
        "put_vol": 600,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16100,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 10000,
        "put_oi_change": 0,
        "put_vol": 4350,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16150,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 3700,
        "put_oi_change": 150,
        "put_vol": 2550,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16200,
        "expiry": "Dec 15 2022",
        "call_oi": 450,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 10500,
        "put_oi_change": 0,
        "put_vol": 1450,
        "pcr_oi": 23.3333,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16250,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 6050,
        "put_oi_change": 0,
        "put_vol": 150,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16300,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 16250,
        "put_oi_change": 950,
        "put_vol": 4850,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16350,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 3600,
        "put_oi_change": -700,
        "put_vol": 1500,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16400,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 6250,
        "put_oi_change": 50,
        "put_vol": 400,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16450,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 3100,
        "put_oi_change": -250,
        "put_vol": 2050,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16500,
        "expiry": "Dec 15 2022",
        "call_oi": 3050,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 441300,
        "put_oi_change": -91150,
        "put_vol": 1285550,
        "pcr_oi": 144.6885,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16550,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 4500,
        "put_oi_change": -1150,
        "put_vol": 141350,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16600,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 34000,
        "put_oi_change": 9600,
        "put_vol": 57400,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16650,
        "expiry": "Dec 15 2022",
        "call_oi": 0,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 5750,
        "put_oi_change": 1850,
        "put_vol": 4800,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16700,
        "expiry": "Dec 15 2022",
        "call_oi": 1050,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 28900,
        "put_oi_change": 3200,
        "put_vol": 45250,
        "pcr_oi": 27.5238,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16750,
        "expiry": "Dec 15 2022",
        "call_oi": 600,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 5750,
        "put_oi_change": -800,
        "put_vol": 2750,
        "pcr_oi": 9.5833,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16800,
        "expiry": "Dec 15 2022",
        "call_oi": 2600,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 33950,
        "put_oi_change": -14650,
        "put_vol": 129500,
        "pcr_oi": 13.0577,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16850,
        "expiry": "Dec 15 2022",
        "call_oi": 100,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 4850,
        "put_oi_change": 1200,
        "put_vol": 6500,
        "pcr_oi": 48.5,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16900,
        "expiry": "Dec 15 2022",
        "call_oi": 300,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 48100,
        "put_oi_change": 5700,
        "put_vol": 84300,
        "pcr_oi": 160.3333,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 16950,
        "expiry": "Dec 15 2022",
        "call_oi": 200,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 11200,
        "put_oi_change": -1800,
        "put_vol": 14700,
        "pcr_oi": 56,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17000,
        "expiry": "Dec 15 2022",
        "call_oi": 13950,
        "call_oi_change": -1150,
        "call_vol": 1700,
        "put_oi": 1714050,
        "put_oi_change": 128650,
        "put_vol": 3059450,
        "pcr_oi": 122.871,
        "pcr_vol": 1799.6765
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17050,
        "expiry": "Dec 15 2022",
        "call_oi": 100,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 8550,
        "put_oi_change": -2050,
        "put_vol": 33250,
        "pcr_oi": 85.5,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17100,
        "expiry": "Dec 15 2022",
        "call_oi": 1250,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 259100,
        "put_oi_change": 105550,
        "put_vol": 1282900,
        "pcr_oi": 207.28,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17150,
        "expiry": "Dec 15 2022",
        "call_oi": 50,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 21050,
        "put_oi_change": 900,
        "put_vol": 86900,
        "pcr_oi": 421,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17200,
        "expiry": "Dec 15 2022",
        "call_oi": 2850,
        "call_oi_change": -250,
        "call_vol": 500,
        "put_oi": 988500,
        "put_oi_change": 196000,
        "put_vol": 2031950,
        "pcr_oi": 346.8421,
        "pcr_vol": 4063.9
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17250,
        "expiry": "Dec 15 2022",
        "call_oi": 200,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 61650,
        "put_oi_change": 20000,
        "put_vol": 569950,
        "pcr_oi": 308.25,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17300,
        "expiry": "Dec 15 2022",
        "call_oi": 2400,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 1335750,
        "put_oi_change": 964350,
        "put_vol": 4670050,
        "pcr_oi": 556.5625,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17350,
        "expiry": "Dec 15 2022",
        "call_oi": 50,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 36700,
        "put_oi_change": 6450,
        "put_vol": 548900,
        "pcr_oi": 734,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17400,
        "expiry": "Dec 15 2022",
        "call_oi": 4050,
        "call_oi_change": 0,
        "call_vol": 150,
        "put_oi": 734100,
        "put_oi_change": -48800,
        "put_vol": 2914200,
        "pcr_oi": 181.2593,
        "pcr_vol": 19428
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17450,
        "expiry": "Dec 15 2022",
        "call_oi": 700,
        "call_oi_change": 0,
        "call_vol": 0,
        "put_oi": 52800,
        "put_oi_change": 9700,
        "put_vol": 650600,
        "pcr_oi": 75.4286,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17500,
        "expiry": "Dec 15 2022",
        "call_oi": 30600,
        "call_oi_change": -250,
        "call_vol": 1450,
        "put_oi": 3540950,
        "put_oi_change": 995600,
        "put_vol": 12250050,
        "pcr_oi": 115.7173,
        "pcr_vol": 8448.3103
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17550,
        "expiry": "Dec 15 2022",
        "call_oi": 1900,
        "call_oi_change": 0,
        "call_vol": 50,
        "put_oi": 125350,
        "put_oi_change": -78550,
        "put_vol": 847850,
        "pcr_oi": 65.9737,
        "pcr_vol": 16957
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17600,
        "expiry": "Dec 15 2022",
        "call_oi": 6750,
        "call_oi_change": -250,
        "call_vol": 550,
        "put_oi": 769600,
        "put_oi_change": -129200,
        "put_vol": 4333950,
        "pcr_oi": 114.0148,
        "pcr_vol": 7879.9091
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17650,
        "expiry": "Dec 15 2022",
        "call_oi": 2350,
        "call_oi_change": 1800,
        "call_vol": 8200,
        "put_oi": 152000,
        "put_oi_change": -268600,
        "put_vol": 1814300,
        "pcr_oi": 64.6809,
        "pcr_vol": 221.2561
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17700,
        "expiry": "Dec 15 2022",
        "call_oi": 6400,
        "call_oi_change": 50,
        "call_vol": 350,
        "put_oi": 1976900,
        "put_oi_change": -90300,
        "put_vol": 7992750,
        "pcr_oi": 308.8906,
        "pcr_vol": 22836.4286
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17750,
        "expiry": "Dec 15 2022",
        "call_oi": 3750,
        "call_oi_change": -50,
        "call_vol": 100,
        "put_oi": 306150,
        "put_oi_change": -21950,
        "put_vol": 2012550,
        "pcr_oi": 81.64,
        "pcr_vol": 20125.5
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17800,
        "expiry": "Dec 15 2022",
        "call_oi": 8850,
        "call_oi_change": -400,
        "call_vol": 4850,
        "put_oi": 3177650,
        "put_oi_change": -154350,
        "put_vol": 14695500,
        "pcr_oi": 359.0565,
        "pcr_vol": 3030
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17850,
        "expiry": "Dec 15 2022",
        "call_oi": 800,
        "call_oi_change": 50,
        "call_vol": 100,
        "put_oi": 777850,
        "put_oi_change": -1505500,
        "put_vol": 7361250,
        "pcr_oi": 972.3125,
        "pcr_vol": 73612.5
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17900,
        "expiry": "Dec 15 2022",
        "call_oi": 14900,
        "call_oi_change": -300,
        "call_vol": 6400,
        "put_oi": 2314950,
        "put_oi_change": -353200,
        "put_vol": 13783200,
        "pcr_oi": 155.3658,
        "pcr_vol": 2153.625
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 17950,
        "expiry": "Dec 15 2022",
        "call_oi": 5050,
        "call_oi_change": 0,
        "call_vol": 1050,
        "put_oi": 758300,
        "put_oi_change": -23300,
        "put_vol": 4619600,
        "pcr_oi": 150.1584,
        "pcr_vol": 4399.619
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18000,
        "expiry": "Dec 15 2022",
        "call_oi": 109450,
        "call_oi_change": -6650,
        "call_vol": 329900,
        "put_oi": 6606200,
        "put_oi_change": 1546600,
        "put_vol": 25762450,
        "pcr_oi": 60.3582,
        "pcr_vol": 78.0917
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18050,
        "expiry": "Dec 15 2022",
        "call_oi": 17700,
        "call_oi_change": 6250,
        "call_vol": 23100,
        "put_oi": 2650300,
        "put_oi_change": 885300,
        "put_vol": 11644700,
        "pcr_oi": 149.7345,
        "pcr_vol": 504.0996
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18100,
        "expiry": "Dec 15 2022",
        "call_oi": 32100,
        "call_oi_change": -2850,
        "call_vol": 239350,
        "put_oi": 3258550,
        "put_oi_change": -268600,
        "put_vol": 27456100,
        "pcr_oi": 101.5125,
        "pcr_vol": 114.7111
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18150,
        "expiry": "Dec 15 2022",
        "call_oi": 20550,
        "call_oi_change": -200,
        "call_vol": 36300,
        "put_oi": 1769500,
        "put_oi_change": -48950,
        "put_vol": 19134800,
        "pcr_oi": 86.1071,
        "pcr_vol": 527.1295
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18200,
        "expiry": "Dec 15 2022",
        "call_oi": 115800,
        "call_oi_change": -49000,
        "call_vol": 825550,
        "put_oi": 3808200,
        "put_oi_change": -89950,
        "put_vol": 41730900,
        "pcr_oi": 32.886,
        "pcr_vol": 50.5492
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18250,
        "expiry": "Dec 15 2022",
        "call_oi": 48550,
        "call_oi_change": 3500,
        "call_vol": 323700,
        "put_oi": 3079250,
        "put_oi_change": 520950,
        "put_vol": 27550950,
        "pcr_oi": 63.4243,
        "pcr_vol": 85.1126
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18300,
        "expiry": "Dec 15 2022",
        "call_oi": 911300,
        "call_oi_change": -104200,
        "call_vol": 4225500,
        "put_oi": 6504400,
        "put_oi_change": 809950,
        "put_vol": 59454750,
        "pcr_oi": 7.1375,
        "pcr_vol": 14.0705
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18350,
        "expiry": "Dec 15 2022",
        "call_oi": 151950,
        "call_oi_change": -53400,
        "call_vol": 3152350,
        "put_oi": 2491550,
        "put_oi_change": -394550,
        "put_vol": 38020900,
        "pcr_oi": 16.3972,
        "pcr_vol": 12.0611
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18400,
        "expiry": "Dec 15 2022",
        "call_oi": 947500,
        "call_oi_change": -847350,
        "call_vol": 23439400,
        "put_oi": 6245650,
        "put_oi_change": -195650,
        "put_vol": 86395350,
        "pcr_oi": 6.5917,
        "pcr_vol": 3.6859
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18450,
        "expiry": "Dec 15 2022",
        "call_oi": 491700,
        "call_oi_change": -507100,
        "call_vol": 17500100,
        "put_oi": 2749000,
        "put_oi_change": 524100,
        "put_vol": 54728650,
        "pcr_oi": 5.5908,
        "pcr_vol": 3.1273
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18500,
        "expiry": "Dec 15 2022",
        "call_oi": 3668350,
        "call_oi_change": -2654750,
        "call_vol": 109746150,
        "put_oi": 8216250,
        "put_oi_change": 1920750,
        "put_vol": 153528750,
        "pcr_oi": 2.2398,
        "pcr_vol": 1.3989
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18550,
        "expiry": "Dec 15 2022",
        "call_oi": 1405000,
        "call_oi_change": -1024400,
        "call_vol": 81450950,
        "put_oi": 3623400,
        "put_oi_change": 2771200,
        "put_vol": 86479850,
        "pcr_oi": 2.5789,
        "pcr_vol": 1.0617
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18600,
        "expiry": "Dec 15 2022",
        "call_oi": 9777550,
        "call_oi_change": -927000,
        "call_vol": 186974000,
        "put_oi": 7768450,
        "put_oi_change": 2324850,
        "put_vol": 125885950,
        "pcr_oi": 0.7945,
        "pcr_vol": 0.6733
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18650,
        "expiry": "Dec 15 2022",
        "call_oi": 3168100,
        "call_oi_change": -641600,
        "call_vol": 74239150,
        "put_oi": 938250,
        "put_oi_change": 471000,
        "put_vol": 31875350,
        "pcr_oi": 0.2962,
        "pcr_vol": 0.4294
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18700,
        "expiry": "Dec 15 2022",
        "call_oi": 8911000,
        "call_oi_change": -67800,
        "call_vol": 112901250,
        "put_oi": 1484600,
        "put_oi_change": 674400,
        "put_vol": 36087450,
        "pcr_oi": 0.1666,
        "pcr_vol": 0.3196
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18750,
        "expiry": "Dec 15 2022",
        "call_oi": 3371100,
        "call_oi_change": 142100,
        "call_vol": 50726000,
        "put_oi": 280800,
        "put_oi_change": 177350,
        "put_vol": 6769150,
        "pcr_oi": 0.0833,
        "pcr_vol": 0.1334
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18800,
        "expiry": "Dec 15 2022",
        "call_oi": 7305800,
        "call_oi_change": 594750,
        "call_vol": 76581850,
        "put_oi": 524400,
        "put_oi_change": 144550,
        "put_vol": 7150250,
        "pcr_oi": 0.0718,
        "pcr_vol": 0.0934
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18850,
        "expiry": "Dec 15 2022",
        "call_oi": 3772600,
        "call_oi_change": 123200,
        "call_vol": 34257150,
        "put_oi": 148050,
        "put_oi_change": 63900,
        "put_vol": 790000,
        "pcr_oi": 0.0392,
        "pcr_vol": 0.0231
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18900,
        "expiry": "Dec 15 2022",
        "call_oi": 5155750,
        "call_oi_change": 185850,
        "call_vol": 44166400,
        "put_oi": 117400,
        "put_oi_change": -11800,
        "put_vol": 1124100,
        "pcr_oi": 0.0228,
        "pcr_vol": 0.0255
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 18950,
        "expiry": "Dec 15 2022",
        "call_oi": 2417900,
        "call_oi_change": 177450,
        "call_vol": 19830950,
        "put_oi": 28000,
        "put_oi_change": 3600,
        "put_vol": 174150,
        "pcr_oi": 0.0116,
        "pcr_vol": 0.0088
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19000,
        "expiry": "Dec 15 2022",
        "call_oi": 9680200,
        "call_oi_change": -451100,
        "call_vol": 44360050,
        "put_oi": 218700,
        "put_oi_change": 23950,
        "put_vol": 770700,
        "pcr_oi": 0.0226,
        "pcr_vol": 0.0174
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19050,
        "expiry": "Dec 15 2022",
        "call_oi": 2558950,
        "call_oi_change": 428050,
        "call_vol": 10681300,
        "put_oi": 20500,
        "put_oi_change": 3400,
        "put_vol": 57050,
        "pcr_oi": 0.008,
        "pcr_vol": 0.0053
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19100,
        "expiry": "Dec 15 2022",
        "call_oi": 3570700,
        "call_oi_change": 193250,
        "call_vol": 20525300,
        "put_oi": 28900,
        "put_oi_change": -6650,
        "put_vol": 64050,
        "pcr_oi": 0.0081,
        "pcr_vol": 0.0031
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19150,
        "expiry": "Dec 15 2022",
        "call_oi": 736450,
        "call_oi_change": 58950,
        "call_vol": 4980350,
        "put_oi": 4750,
        "put_oi_change": 200,
        "put_vol": 4550,
        "pcr_oi": 0.0064,
        "pcr_vol": 0.0009
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19200,
        "expiry": "Dec 15 2022",
        "call_oi": 2834350,
        "call_oi_change": -270850,
        "call_vol": 12131050,
        "put_oi": 25600,
        "put_oi_change": -900,
        "put_vol": 13450,
        "pcr_oi": 0.009,
        "pcr_vol": 0.0011
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19250,
        "expiry": "Dec 15 2022",
        "call_oi": 577650,
        "call_oi_change": -68750,
        "call_vol": 2308750,
        "put_oi": 2550,
        "put_oi_change": 50,
        "put_vol": 7550,
        "pcr_oi": 0.0044,
        "pcr_vol": 0.0033
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19300,
        "expiry": "Dec 15 2022",
        "call_oi": 2102650,
        "call_oi_change": -222350,
        "call_vol": 5544400,
        "put_oi": 2850,
        "put_oi_change": -50,
        "put_vol": 2250,
        "pcr_oi": 0.0014,
        "pcr_vol": 0.0004
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19350,
        "expiry": "Dec 15 2022",
        "call_oi": 268950,
        "call_oi_change": -35550,
        "call_vol": 1534200,
        "put_oi": 550,
        "put_oi_change": -50,
        "put_vol": 2000,
        "pcr_oi": 0.002,
        "pcr_vol": 0.0013
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19400,
        "expiry": "Dec 15 2022",
        "call_oi": 1574300,
        "call_oi_change": -44950,
        "call_vol": 4789350,
        "put_oi": 1100,
        "put_oi_change": 50,
        "put_vol": 1950,
        "pcr_oi": 0.0007,
        "pcr_vol": 0.0004
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19450,
        "expiry": "Dec 15 2022",
        "call_oi": 121250,
        "call_oi_change": -11500,
        "call_vol": 938800,
        "put_oi": 100,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0.0008,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19500,
        "expiry": "Dec 15 2022",
        "call_oi": 7867900,
        "call_oi_change": -1865300,
        "call_vol": 20044600,
        "put_oi": 7600,
        "put_oi_change": -2250,
        "put_vol": 7500,
        "pcr_oi": 0.001,
        "pcr_vol": 0.0004
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19550,
        "expiry": "Dec 15 2022",
        "call_oi": 115150,
        "call_oi_change": 13300,
        "call_vol": 724200,
        "put_oi": 150,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0.0013,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19600,
        "expiry": "Dec 15 2022",
        "call_oi": 1284850,
        "call_oi_change": -286100,
        "call_vol": 2790600,
        "put_oi": 350,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0.0003,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19650,
        "expiry": "Dec 15 2022",
        "call_oi": 70050,
        "call_oi_change": 8150,
        "call_vol": 498650,
        "put_oi": 0,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19700,
        "expiry": "Dec 15 2022",
        "call_oi": 696150,
        "call_oi_change": -22950,
        "call_vol": 2690850,
        "put_oi": 350,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0.0005,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19750,
        "expiry": "Dec 15 2022",
        "call_oi": 92050,
        "call_oi_change": 24600,
        "call_vol": 490900,
        "put_oi": 250,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0.0027,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19800,
        "expiry": "Dec 15 2022",
        "call_oi": 1432750,
        "call_oi_change": -216000,
        "call_vol": 2463650,
        "put_oi": 200,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0.0001,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19850,
        "expiry": "Dec 15 2022",
        "call_oi": 73150,
        "call_oi_change": 16300,
        "call_vol": 437200,
        "put_oi": 1450,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0.0198,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19900,
        "expiry": "Dec 15 2022",
        "call_oi": 371500,
        "call_oi_change": 37200,
        "call_vol": 1494650,
        "put_oi": 100,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0.0003,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 19950,
        "expiry": "Dec 15 2022",
        "call_oi": 42450,
        "call_oi_change": -6950,
        "call_vol": 98950,
        "put_oi": 100,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0.0024,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 20000,
        "expiry": "Dec 15 2022",
        "call_oi": 3764250,
        "call_oi_change": -631400,
        "call_vol": 6528000,
        "put_oi": 6350,
        "put_oi_change": 3650,
        "put_vol": 23200,
        "pcr_oi": 0.0017,
        "pcr_vol": 0.0036
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 20050,
        "expiry": "Dec 15 2022",
        "call_oi": 92850,
        "call_oi_change": -2200,
        "call_vol": 78400,
        "put_oi": 0,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 20100,
        "expiry": "Dec 15 2022",
        "call_oi": 547250,
        "call_oi_change": -5850,
        "call_vol": 793600,
        "put_oi": 0,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 20150,
        "expiry": "Dec 15 2022",
        "call_oi": 34350,
        "call_oi_change": 0,
        "call_vol": 56600,
        "put_oi": 0,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 20200,
        "expiry": "Dec 15 2022",
        "call_oi": 441800,
        "call_oi_change": -64400,
        "call_vol": 313100,
        "put_oi": 0,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 20250,
        "expiry": "Dec 15 2022",
        "call_oi": 53400,
        "call_oi_change": -350,
        "call_vol": 69050,
        "put_oi": 0,
        "put_oi_change": 0,
        "put_vol": 0,
        "pcr_oi": 0,
        "pcr_vol": 0
    },
    {
        "symbol": "NIFTY",
        "instrument_type": "Options",
        "stk_price": 20300,
        "expiry": "Dec 15 2022",
        "call_oi": 1094050,
        "call_oi_change": 52150,
        "call_vol": 1087500,
        "put_oi": 0,
        "put_oi_change": 0,
        "put_vol": 50,
        "pcr_oi": 0,
        "pcr_vol": 0
    }
])
# show option chain as table in streamlit
st.dataframe(option_chain)
spot_price = 18500

# filter option_chain data in a new variable to only contain +-5% of the strike prices

option_chain_filtered = option_chain[option_chain['stk_price'] >= spot_price*0.95]
option_chain_filtered = option_chain_filtered[option_chain_filtered['stk_price'] <= spot_price*1.05]

#write a heading to describe the bar plot
st.header(f"Open Interest for {option_chain['symbol'][0]}, {option_chain['expiry'][0]}")
st.caption('More call is bearish. More puts is bullish.')
# plot open interest variable in option_chain as bar graph
st.bar_chart(option_chain_filtered, x='stk_price', y=["put_oi", "call_oi"])

# display change in open_interest via bar plot
st.header(f"Change in Open Interest for {option_chain['symbol'][0]}, {option_chain['expiry'][0]}")
st.caption('Addition in  call is bearish. Addition in puts is bullish.')
st.bar_chart(option_chain_filtered, x='stk_price', y=["put_oi_change", "call_oi_change"])
